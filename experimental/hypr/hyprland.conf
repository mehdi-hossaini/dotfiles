# ═══════════════════════════════════════════════════════════════════════════════
# CORE CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

autogenerated = 0

monitor = eDP-1, 1920x1200@165, 0x0, 1

# Multi-monitor example (uncomment and adjust as needed):
# monitor = HDMI-A-1, 1920x1080@144, 1920x0, 1
# monitor = , preferred, auto, auto  # Fallback for unknown displays


# ═══════════════════════════════════════════════════════════════════════════════
# ENVIRONMENT VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════

# Cursor Configuration
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,Breeze-cursors

# ═══ DARK MODE ENVIRONMENT ═══
# GTK Dark Theme
env = GTK_THEME,Adwaita-dark

# Qt/KDE Dark Theme (for Dolphin, Kate, etc.)
env = QT_QPA_PLATFORMTHEME,kde


# Wayland/Native Hints
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_WAYLAND_USE_VISIBLE,1
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = GDK_BACKEND,wayland,x11

# iGPU Selection (uncomment if dGPU exists and you want to force iGPU)
# env = AQ_DRM_DEVICES,/dev/dri/card0

# Electron Apps Wayland Support
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = _JAVA_AWT_WM_NONREPARENTING,1
env = EGL_PLATFORM,wayland

# Theme Consistency
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = ELECTRON_FORCE_DARK_MODE,1


# ═══════════════════════════════════════════════════════════════════════════════
# STARTUP APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = dunst
exec-once = hyprpaper
exec-once = waybar
exec-once = pipewire
exec-once = wireplumber
exec-once = ~/.config/hypr/scripts/portal-startup.sh 2>/dev/null || (sleep 2 && /usr/lib/xdg-desktop-portal-hyprland)
exec-once = brightnessctl set 40%
exec-once = gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita-dark'
exec-once = gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'


# ═══════════════════════════════════════════════════════════════════════════════
# VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════

$terminal = kitty
$fileManager = dolphin
$menu = wofi --show drun --matching=snappy -i
$mainMod = SUPER

# ═══ TOKYO NIGHT COLOR PALETTE ═══
$bg = 1a1b26
$bg_alt = 24283b
$fg = c0caf5
$fg_dark = 565f89
$blue = 7aa2f7
$cyan = 7dcfff
$green = 9ece6a
$orange = ff9e64
$red = f7768e
$purple = bb9af7
$yellow = e0af68


# ═══════════════════════════════════════════════════════════════════════════════
# GENERAL & PERFORMANCE
# ═══════════════════════════════════════════════════════════════════════════════

general {
    gaps_in = 6
    gaps_out = 12
    border_size = 2

    # Tokyo Night color scheme
    col.active_border = rgba($blueee) rgba($purpleee) 45deg
    col.inactive_border = rgba($bg_altdd)
    
    layout = dwindle
    allow_tearing = true
    
    # Border grab for resizing
    resize_on_border = true
    extend_border_grab_area = 20
    hover_icon_on_border = true
}


# ═══════════════════════════════════════════════════════════════════════════════
# DECORATION
# ═══════════════════════════════════════════════════════════════════════════════

decoration {
    rounding = 10

    # Minimal shadows for performance
    shadow {
        enabled = true
        range = 4
        render_power = 2
        color = rgba(1a1b26ee)
        color_inactive = rgba(1a1b2688)
    }

    blur {
        enabled = false
    }

    dim_inactive = false
    dim_strength = 0.0
}


# ═══════════════════════════════════════════════════════════════════════════════
# ANIMATIONS
# ═══════════════════════════════════════════════════════════════════════════════

animations {
    enabled = no

    # Smooth bezier curves
    bezier = smoothOut, 0.36, 0.0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1.0, 0.5, 1.0
    bezier = overshot, 0.4, 0.0, 0.2, 1.2
    bezier = easeOutQuint, 0.22, 1.0, 0.36, 1.0
    bezier = ease, 0.25, 0.1, 0.25, 1.0

    # Window animations
    animation = windows, 1, 4, easeOutQuint, slide
    animation = windowsOut, 1, 4, ease, slide
    animation = windowsMove, 1, 4, ease, slide
    
    # Fade animations
    animation = fadeIn, 1, 4, ease
    animation = fadeOut, 1, 4, ease
    animation = fade, 1, 4, ease
    animation = border, 1, 8, default
    
    # Workspace animations
    animation = workspaces, 1, 4, overshot, slide
    animation = specialWorkspace, 1, 4, overshot, slidevert
}


# ═══════════════════════════════════════════════════════════════════════════════
# INPUT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

input {
    kb_layout = se
    numlock_by_default = true
    follow_mouse = 1
    mouse_refocus = true
    accel_profile = flat
    sensitivity = 0

    touchpad {
        natural_scroll = false
        tap-to-click = true
        disable_while_typing = true
        scroll_factor = 0.5
        tap-and-drag = true
        drag_lock = false
    }
}

cursor {
    no_hardware_cursors = false
    inactive_timeout = 5
    enable_hyprcursor = true
    hide_on_key_press = true
}


# ═══════════════════════════════════════════════════════════════════════════════
# MISC OPTIONS
# ═══════════════════════════════════════════════════════════════════════════════

misc {
    vfr = true
    vrr = 1
    disable_hyprland_logo = true
    force_default_wallpaper = 0
    background_color = 0x1a1b26
    animate_manual_resizes = false
    animate_mouse_windowdragging = false
    enable_swallow = true
    swallow_regex = ^(kitty|Alacritty|foot|org.wezfurlong.wezterm)$
    focus_on_activate = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    middle_click_paste = false
}


# ═══════════════════════════════════════════════════════════════════════════════
# DEBUG OPTIONS
# ═══════════════════════════════════════════════════════════════════════════════

debug {
    disable_logs = true
    disable_time = true
    enable_stdout_logs = false
}


# ═══════════════════════════════════════════════════════════════════════════════
# LAYOUTS
# ═══════════════════════════════════════════════════════════════════════════════

dwindle {
    pseudotile = true
    preserve_split = true
    smart_split = false
    smart_resizing = true
    force_split = 0
}

master {
    new_status = master
    new_on_top = true
    mfact = 0.55
    special_scale_factor = 0.8
    orientation = left
}


# ═══════════════════════════════════════════════════════════════════════════════
# GROUPS
# ═══════════════════════════════════════════════════════════════════════════════

group {
    insert_after_current = true
    focus_removed_window = true
    
    groupbar {
        enabled = true
        font_family = JetBrains Mono Nerd Font
        font_size = 11
        col.active = rgba($blueee)
        col.inactive = rgba($bg_altdd)
        col.locked_active = rgba($redee)
        col.locked_inactive = rgba($bg_altdd)
        render_titles = true
        scrolling = true
        gradients = false
        priority = 3
        gaps_in = 3
        gaps_out = 3
    }
}


# ═══════════════════════════════════════════════════════════════════════════════
# BINDS
# ═══════════════════════════════════════════════════════════════════════════════

binds {
    workspace_back_and_forth = true
    allow_workspace_cycles = true
    pass_mouse_when_bound = false
    scroll_event_delay = 300
    movefocus_cycles_fullscreen = true
}


# ═══════════════════════════════════════════════════════════════════════════════
# WORKSPACE RULES
# ═══════════════════════════════════════════════════════════════════════════════

# Smart gaps (uncomment if you want zero gaps when only one window is open):
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[20],  gapsout:0, gapsin:0


# ═══════════════════════════════════════════════════════════════════════════════
# WINDOW RULES
# ═══════════════════════════════════════════════════════════════════════════════


# ═══════════════════════════════════════════════════════════════════════════════
# POLKIT / AUTHENTICATION
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = polkit-hypr
    match:class = ^(hyprpolkitagent)$
    float = true
    center = true
    size = 800 500
    rounding = 12
}

windowrule {
    name = polkit-kde
    match:class = ^(polkit-kde-authentication-agent-1)$
    float = true
    center = true
    rounding = 12
}

windowrule {
    name = polkit-kde-org
    match:class = ^(org.kde.polkit-kde-authentication-agent-1)$
    float = true
    center = true
    rounding = 12
}

windowrule {
    name = polkit-gcr
    match:class = ^(gcr-prompter)$
    float = true
    center = true
    rounding = 12
}

# Pinentry — GPG/SSH password prompts
windowrule {
    name = pinentry
    match:class = ^(pinentry-.*)$
    float = true
    center = true
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# FLOATING UTILITY WINDOWS
# ═══════════════════════════════════════════════════════════════════════════════

# pavucontrol — native class
windowrule {
    name = float-pavucontrol
    match:class = ^(pavucontrol)$
    float = true
    size = 900 600
    rounding = 12
}

# pavucontrol — Flatpak class
windowrule {
    name = float-pavucontrol-flatpak
    match:class = ^(org.pulseaudio.pavucontrol)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = float-pavucontrol-qt
    match:class = ^(pavucontrol-qt)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = float-nm-connection-editor
    match:class = ^(nm-connection-editor)$
    float = true
    size = 800 550
    rounding = 12
}

windowrule {
    name = float-nm-editor
    match:class = ^(network-manager-applet)$
    float = true
}

windowrule {
    name = float-xdg-desktop-portal
    match:class = ^(xdg-desktop-portal-gtk)$
    float = true
    rounding = 12
}

windowrule {
    name = float-swappy
    match:class = ^(swappy)$
    float = true
}

windowrule {
    name = float-flameshot
    match:class = ^(flameshot)$
    float = true
}

windowrule {
    name = float-kde-connect
    match:class = ^(kdeconnect.*)$
    float = true
}

windowrule {
    name = float-kde-connect-app
    match:class = ^(kdeconnect.app|org.kde.kdeconnect.app)$
    float = true
    size = 800 600
    rounding = 12
}

windowrule {
    name = float-bluetooth
    match:class = ^(blueman-manager)$
    float = true
    size = 800 550
    rounding = 12
}

windowrule {
    name = float-gnome-calculator
    match:class = ^(org.gnome.Calculator)$
    float = true
    size = 420 520
    rounding = 12
}

windowrule {
    name = float-gnome-control-center
    match:class = ^(gnome-control-center)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = float-kcalc
    match:class = ^(kcalc)$
    float = true
    size = 420 520
    rounding = 12
}

windowrule {
    name = float-kde-system-settings
    match:class = ^(systemsettings)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = float-gparted
    match:class = ^(gparted)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = float-timeshift
    match:class = ^(timeshift-gtk)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = float-font-manager
    match:class = ^(font-manager)$
    float = true
    size = 900 650
    rounding = 12
}

windowrule {
    name = float-color-picker
    match:class = ^(org.gnome.ColorChooser|gpick|kcolorchooser)$
    float = true
    rounding = 12
}

windowrule {
    name = float-gnome-calendar
    match:class = ^(gnome-calendar|org.gnome.Calendar)$
    float = true
    size = 700 550
    rounding = 12
}

windowrule {
    name = float-gnome-clocks
    match:class = ^(org.gnome.clocks)$
    float = true
    size = 600 500
    rounding = 12
}

windowrule {
    name = float-gnome-weather
    match:class = ^(org.gnome.Weather)$
    float = true
    size = 700 500
    rounding = 12
}

windowrule {
    name = float-gnome-maps
    match:class = ^(org.gnome.Maps)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = float-printer
    match:class = ^(system-config-printer)$
    float = true
    size = 800 600
    rounding = 12
}

windowrule {
    name = float-simple-scan
    match:class = ^(simple-scan)$
    float = true
    size = 800 600
    rounding = 12
}

windowrule {
    name = float-baobab
    match:class = ^(org.gnome.baobab|baobab)$
    float = true
    size = 900 650
    rounding = 12
}

windowrule {
    name = float-qdirstat
    match:class = ^(qdirstat)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = float-zenity
    match:class = ^(zenity)$
    float = true
    rounding = 12
}

windowrule {
    name = float-yad
    match:class = ^(yad)$
    float = true
    rounding = 12
}

windowrule {
    name = float-kdialog
    match:class = ^(kdialog|org.kde.kdialog)$
    float = true
    rounding = 12
}

# Center all floating windows
windowrule {
    name = center-floating
    match:float = 1
    center = true
}


# ═══════════════════════════════════════════════════════════════════════════════
# CACHYOS SPECIFIC
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = cachyos-hello
    match:class = ^(CachyOSHello)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = cachyos-pi
    match:class = ^(org.cachyos.cachyos-pi)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = btrfs-assistant
    match:class = ^(btrfs-assistant)$
    float = true
    size = 1000 700
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# PACKAGE MANAGERS
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = octopi
    match:class = ^(octopi)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = pamac
    match:class = ^(pamac-manager|org.manjaro.pamac.manager)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = update-manager
    match:class = ^(update-manager)$
    float = true
    size = 700 500
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# ZEN BROWSER RULES
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = zen-main
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    workspace = 1
}

windowrule {
    name = zen-dialogs
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    match:title = ^(Library|About|Preferences|Add-ons|Settings)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = zen-pip
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    match:title = ^(Picture-in-Picture)$
    float = true
    pin = true
    size = 30% 30%
    move = 67% 5%
    rounding = 12
}

windowrule {
    name = zen-popups
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    match:title = ^(Sign in|Login|Share)$
    float = true
    size = 650 700
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# PICTURE-IN-PICTURE
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = pip-firefox
    match:title = ^(Picture-in-Picture)$
    float = true
    pin = true
    size = 30% 30%
    move = 67% 5%
    rounding = 12
}

windowrule {
    name = pip-chromium
    match:title = ^(Picture in picture)$
    float = true
    pin = true
    size = 30% 30%
    move = 67% 5%
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# OTHER BROWSERS
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = firefox-main
    match:class = ^(firefox)$
    workspace = 1
}

windowrule {
    name = firefox-dialogs
    match:class = ^(firefox)$
    match:title = ^(Library|About Mozilla Firefox|Preferences|Add-ons)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = chromium-main
    match:class = ^(chromium|google-chrome)$
    workspace = 1
}

windowrule {
    name = brave-main
    match:class = ^(brave-browser)$
    workspace = 1
}

windowrule {
    name = librewolf-main
    match:class = ^(librewolf)$
    workspace = 1
}

windowrule {
    name = vivaldi-main
    match:class = ^(vivaldi-stable|vivaldi)$
    workspace = 1
}

windowrule {
    name = opera-main
    match:class = ^(opera)$
    workspace = 1
}

windowrule {
    name = thorium-main
    match:class = ^(thorium-browser)$
    workspace = 1
}


# ═══════════════════════════════════════════════════════════════════════════════
# TERMINAL RULES
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = kitty-main
    match:class = ^(kitty)$
    opacity = 0.95
}

# Kitty Dropdown Terminal - Toggle with: SUPER+SHIFT+T
windowrule {
    name = kitty-dropdown
    match:class = ^(kitty-dropdown)$
    float = true
    pin = true
    size = 96% 42%
    move = 2% 0
    opacity = 0.92
    animation = slidevert
    rounding = 0
}

windowrule {
    name = alacritty-main
    match:class = ^(Alacritty)$
    opacity = 0.95
}

windowrule {
    name = foot-main
    match:class = ^(foot)$
    opacity = 0.95
}

windowrule {
    name = wezterm-main
    match:class = ^(org.wezfurlong.wezterm)$
    opacity = 0.95
}

windowrule {
    name = ghostty-main
    match:class = ^(com.mitchellh.ghostty)$
    opacity = 0.95
}

windowrule {
    name = contour-main
    match:class = ^(contour)$
    opacity = 0.95
}


# ═══════════════════════════════════════════════════════════════════════════════
# FILE MANAGER RULES
# ═══════════════════════════════════════════════════════════════════════════════

# ═══ Dolphin Rules ═══
# Dolphin reports class as org.kde.dolphin — match both
windowrule {
    name = dolphin-main
    match:class = ^(dolphin|org.kde.dolphin)$
    workspace = 2
}

windowrule {
    name = dolphin-properties
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Properties)$
    float = true
    size = 550 650
    rounding = 12
}

windowrule {
    name = dolphin-file-dialog
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Open|Save|Save As|Select Files)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = dolphin-progress
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Copying|Moving|Deleting|Progress)$
    float = true
    size = 500 300
    rounding = 12
}

windowrule {
    name = dolphin-rename
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Rename)$
    float = true
    size = 450 150
    rounding = 12
}

windowrule {
    name = dolphin-new-item
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(New Folder|New File|Create New)$
    float = true
    size = 450 180
    rounding = 12
}

windowrule {
    name = dolphin-archive
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Add to Archive|Extract|Compress)$
    float = true
    size = 550 450
    rounding = 12
}

windowrule {
    name = dolphin-settings
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Settings|Preferences|Configure Dolphin)$
    float = true
    size = 900 700
    rounding = 12
}

windowrule {
    name = dolphin-search
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Find|Search)$
    float = true
    size = 600 400
    rounding = 12
}

windowrule {
    name = dolphin-confirm
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Confirm|Delete|Trash|Move to Trash)$
    float = true
    size = 450 200
    rounding = 12
}

windowrule {
    name = dolphin-dialogs
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Error|Warning|Information)$
    float = true
    size = 500 300
    rounding = 12
}

windowrule {
    name = dolphin-openwith
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Choose|Open With|Select Application|Choose an Application)$
    float = true
    size = 700 550
    rounding = 12
}

# ═══ KDE System Dialogs ═══
windowrule {
    name = kde-portal-chooseapp
    match:class = ^(org.freedesktop.impl.portal.desktop.kde)$
    float = true
    size = 700 550
    center = true
    rounding = 12
}

windowrule {
    name = kde-openwith
    match:class = ^(kdialog|kded6|kde-open|org.kde.kdialog)$
    float = true
    size = 700 550
    rounding = 12
}

windowrule {
    name = generic-openwith
    match:title = ^(Choose.*Open|Open With|Select.*Application|.*Choose an app.*)$
    float = true
    size = 700 550
    rounding = 12
}

# ═══ Other File Managers ═══
windowrule {
    name = nautilus-main
    match:class = ^(org.gnome.Nautilus|nautilus)$
    workspace = 2
}

windowrule {
    name = thunar-main
    match:class = ^(thunar)$
    workspace = 2
}

windowrule {
    name = pcmanfm-main
    match:class = ^(pcmanfm-qt|pcmanfm)$
    workspace = 2
}

windowrule {
    name = nemo-main
    match:class = ^(nemo)$
    workspace = 2
}

windowrule {
    name = caja-main
    match:class = ^(caja)$
    workspace = 2
}

windowrule {
    name = krusader-main
    match:class = ^(krusader|org.kde.krusader)$
    workspace = 2
}

windowrule {
    name = doublecmd-main
    match:class = ^(doublecmd)$
    workspace = 2
}

windowrule {
    name = ranger-main
    match:class = ^(ranger)$
    workspace = 2
}


# ═══════════════════════════════════════════════════════════════════════════════
# DEVELOPMENT TOOLS
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = vscode-main
    match:class = ^(code|code-url-handler|Code|Code - Insiders|code-oss)$
    workspace = 3
}

windowrule {
    name = vscode-dialogs
    match:class = ^(code)$
    match:title = ^(Open Folder|Open File|Settings)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = vscodium-main
    match:class = ^(codium|VSCodium)$
    workspace = 3
}

windowrule {
    name = jetbrains-main
    match:class = ^(jetbrains-.*)$
    workspace = 3
}

windowrule {
    name = jetbrains-popups
    match:class = ^(jetbrains-.*)$
    match:title = ^(win.*)$
    float = true
}

windowrule {
    name = jetbrains-dialogs
    match:class = ^(jetbrains-.*)$
    match:title = ^(Settings|Preferences|About)$
    float = true
    rounding = 12
}

windowrule {
    name = sublime-main
    match:class = ^(Sublime Text|subl|sublime_text)$
    workspace = 3
}

windowrule {
    name = neovide-main
    match:class = ^(neovide|Neovide)$
    workspace = 3
}

windowrule {
    name = zed-main
    match:class = ^(zed|Zed)$
    workspace = 3
}

windowrule {
    name = emacs-main
    match:class = ^(emacs)$
    workspace = 3
}

windowrule {
    name = android-studio-main
    match:class = ^(jetbrains-androidstudio)$
    workspace = 3
}

windowrule {
    name = dbeaver-main
    match:class = ^(dbeaver|io.dbeaver.DBeaverApplication)$
    workspace = 3
}

windowrule {
    name = tableplus-main
    match:class = ^(TablePlus)$
    workspace = 3
}

windowrule {
    name = beekeeper-main
    match:class = ^(beekeeper-studio)$
    workspace = 3
}

windowrule {
    name = insomnia-main
    match:class = ^(insomnia|io.insomnia.Insomnia)$
    workspace = 3
}

windowrule {
    name = postman-main
    match:class = ^(Postman)$
    workspace = 3
}

windowrule {
    name = gitkraken-main
    match:class = ^(gitkraken)$
    float = true
    size = 1200 800
    rounding = 12
}

windowrule {
    name = gitg-main
    match:class = ^(gitg)$
    float = true
    size = 1100 750
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# STEAM RULES
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = steam-tile
    match:class = ^(steam)$
    match:title = ^(Steam)$
    tile = true
}

windowrule {
    name = steam-no-center
    match:class = ^(steam)$
    center = false
}

windowrule {
    name = steam-games
    match:class = ^(steam_app_.*)$
    fullscreen = true
    monitor = eDP-1
    workspace = 5 silent
    immediate = true
}

windowrule {
    name = steam-overlay
    match:class = ^(steam)$
    match:title = ^(Friends List|Screenshot|Settings|Chat)$
    float = true
    size = 700 750
    rounding = 12
}

windowrule {
    name = steam-bigpicture
    match:class = ^(steam)$
    match:title = ^(Steam Big Picture Mode)$
    fullscreen = true
    monitor = eDP-1
}


# ═══════════════════════════════════════════════════════════════════════════════
# MEDIA & COMMUNICATION
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = discord-main
    match:class = ^(discord|vesktop|WebCord)$
    workspace = 4 silent
}

windowrule {
    name = discord-screenshare
    match:class = ^(discord)$
    match:title = ^(Discord Updater)$
    float = true
    size = 450 250
    rounding = 12
}

windowrule {
    name = slack-main
    match:class = ^(slack)$
    workspace = 4 silent
}

windowrule {
    name = teams-main
    match:class = ^(teams-for-linux|MSTeams)$
    workspace = 4 silent
}

windowrule {
    name = telegram-main
    match:class = ^(org.telegram.desktop|telegramdesktop|telegram-desktop)$
    workspace = 4 silent
}

windowrule {
    name = signal-main
    match:class = ^(signal|Signal)$
    workspace = 4 silent
}

windowrule {
    name = whatsapp-main
    match:class = ^(whatsapp-for-linux|WhatsApp)$
    workspace = 4 silent
}

windowrule {
    name = element-main
    match:class = ^(element-desktop)$
    workspace = 4 silent
}

windowrule {
    name = fluffychat-main
    match:class = ^(fluffychat)$
    workspace = 4 silent
}

windowrule {
    name = nheko-main
    match:class = ^(nheko)$
    workspace = 4 silent
}

windowrule {
    name = fractal-main
    match:class = ^(fractal)$
    workspace = 4 silent
}

windowrule {
    name = hexchat-main
    match:class = ^(hexchat)$
    workspace = 4 silent
}

windowrule {
    name = thunderbird-main
    match:class = ^(thunderbird|Thunderbird)$
    workspace = 4 silent
}

windowrule {
    name = thunderbird-compose
    match:class = ^(thunderbird|Thunderbird)$
    match:title = ^(Write:|Compose)$
    float = true
    size = 1000 750
    rounding = 12
}

windowrule {
    name = evolution-main
    match:class = ^(evolution)$
    workspace = 4 silent
}

windowrule {
    name = spotify-main
    match:class = ^(Spotify|spotify)$
    workspace = 6 silent
}

windowrule {
    name = spotify-tui
    match:class = ^(ncspot)$
    workspace = 6 silent
}

windowrule {
    name = clementine-main
    match:class = ^(clementine)$
    workspace = 6 silent
}

windowrule {
    name = strawberry-main
    match:class = ^(strawberry)$
    workspace = 6 silent
}

windowrule {
    name = vlc-main
    match:class = ^(vlc)$
    workspace = 6 silent
}

windowrule {
    name = mpv-main
    match:class = ^(mpv)$
    float = true
    size = 1280 720
    move = center center
    rounding = 0
}

windowrule {
    name = celluloid-main
    match:class = ^(celluloid)$
    workspace = 6 silent
}

windowrule {
    name = lollypop-main
    match:class = ^(org.gnome.Lollypop)$
    workspace = 6 silent
}

windowrule {
    name = rhythmbox-main
    match:class = ^(rhythmbox)$
    workspace = 6 silent
}

windowrule {
    name = audacity-main
    match:class = ^(audacity)$
    workspace = 7 silent
}

windowrule {
    name = obs-main
    match:class = ^(obs)$
    workspace = 7 silent
}

windowrule {
    name = kdenlive-main
    match:class = ^(kdenlive|org.kde.kdenlive)$
    workspace = 7
}

windowrule {
    name = openshot-main
    match:class = ^(openshot)$
    workspace = 7
}

windowrule {
    name = davinci-main
    match:class = ^(davinci-resolve|resolve)$
    workspace = 7
}

windowrule {
    name = shotcut-main
    match:class = ^(shotcut)$
    workspace = 7
}


# ═══════════════════════════════════════════════════════════════════════════════
# GAMING
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = minecraft-launcher
    match:class = ^(PrismLauncher|org.prismlauncher.PrismLauncher|hmcl)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = minecraft-game
    match:class = ^(Minecraft.*)$
    fullscreen = true
    workspace = 5 silent
    immediate = true
}

windowrule {
    name = gamescope
    match:class = ^(gamescope)$
    fullscreen = true
    monitor = eDP-1
    immediate = true
}

windowrule {
    name = lutris-main
    match:class = ^(lutris)$
    workspace = 5 silent
}

windowrule {
    name = heroic-main
    match:class = ^(heroic)$
    workspace = 5 silent
}

windowrule {
    name = bottles-main
    match:class = ^(com.usebottles.bottles)$
    workspace = 5 silent
}

windowrule {
    name = wine-programs
    match:class = ^(wine|\.exe)$
    float = true
}

windowrule {
    name = mangohud
    match:class = ^(mangohud)$
    float = true
    pin = true
}

windowrule {
    name = cs2-immediate
    match:class = ^(cs2)$
    immediate = true
    fullscreen = true
    workspace = 5 silent
}


# ═══════════════════════════════════════════════════════════════════════════════
# SYSTEM UTILITIES
# ═══════════════════════════════════════════════════════════════════════════════

windowrule {
    name = system-monitor
    match:class = ^(org.gnome.SystemMonitor)$
    float = true
    size = 1000 650
    rounding = 12
}

windowrule {
    name = htop-btop
    match:class = ^(htop|btop)$
    float = true
    size = 1000 650
    rounding = 12
}

windowrule {
    name = archive-manager
    match:class = ^(org.gnome.FileRoller|file-roller|engrampa|ark)$
    float = true
    size = 800 550
    rounding = 12
}

windowrule {
    name = image-viewers
    match:class = ^(org.gnome.eog|eog|nomacs|feh|sxiv|imv|nsxiv)$
    float = true
    size = 1000 750
    rounding = 12
}

windowrule {
    name = document-viewers
    match:class = ^(org.gnome.Evince|evince|atril|okular|zathura)$
    float = true
    size = 1100 800
    rounding = 12
}

windowrule {
    name = pdf-viewers
    match:class = ^(atril|okular|org.kde.okular)$
    float = true
    size = 1100 800
    rounding = 12
}

windowrule {
    name = gimp-main
    match:class = ^(gimp)$
    workspace = 7
}

windowrule {
    name = gimp-float
    match:class = ^(gimp)$
    match:title = ^(Layer|Brush|Tool Options)$
    float = true
    pin = true
}

windowrule {
    name = inkscape-main
    match:class = ^(inkscape)$
    workspace = 7
}

windowrule {
    name = krita-main
    match:class = ^(krita)$
    workspace = 7
}

windowrule {
    name = blender-main
    match:class = ^(blender)$
    workspace = 7
}

windowrule {
    name = darktable-main
    match:class = ^(darktable)$
    workspace = 7
}

windowrule {
    name = rawtherapee-main
    match:class = ^(rawtherapee)$
    workspace = 7
}

windowrule {
    name = digikam-main
    match:class = ^(digikam)$
    workspace = 7
}

windowrule {
    name = shotwell-main
    match:class = ^(shotwell)$
    workspace = 7
}

windowrule {
    name = libreoffice-main
    match:class = ^(libreoffice|soffice)$
    workspace = 8
}

windowrule {
    name = onlyoffice-main
    match:class = ^(onlyoffice-desktopeditors)$
    workspace = 8
}

windowrule {
    name = wps-office-main
    match:class = ^(wps-office|com.wps.Office)$
    workspace = 8
}

windowrule {
    name = calibre-main
    match:class = ^(calibre)$
    workspace = 8
}

windowrule {
    name = vm-virt-manager
    match:class = ^(virt-manager)$
    workspace = 9 silent
}

windowrule {
    name = vm-virtualbox
    match:class = ^(VirtualBox Machine)$
    fullscreen = true
    workspace = 9 silent
}

windowrule {
    name = remmina-main
    match:class = ^(Remmina|org.remmina.Remmina)$
    workspace = 9 silent
}

windowrule {
    name = looking-glass
    match:class = ^(looking-glass-client)$
    fullscreen = true
    workspace = 9 silent
}

windowrule {
    name = anydesk
    match:class = ^(anydesk)$
    workspace = 9 silent
}

windowrule {
    name = rustdesk
    match:class = ^(rustdesk)$
    workspace = 9 silent
}


# ═══════════════════════════════════════════════════════════════════════════════
# KEYBINDINGS
# ═══════════════════════════════════════════════════════════════════════════════

# ═══ Essential Apps ═══
bind = $mainMod, Return, exec, $terminal
bind = $mainMod, D, exec, pidof wofi >/dev/null && pkill -x wofi || wofi --show drun --matching=snappy -i

# ═══ Window Actions ═══
bind = $mainMod, Q, killactive
bind = $mainMod, V, fullscreen
bind = $mainMod SHIFT, Space, togglefloating
bind = $mainMod, G, togglegroup

# ═══ Quick Launch ═══
bind = $mainMod, E, exec, zen-browser || zen || zen-alpha
bind = $mainMod, F, exec, $fileManager

# ═══ Navigation ═══
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# ═══ Move Windows ═══
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

# ═══ Group Navigation ═══
bind = ALT, Tab, changegroupactive, f
bind = ALT SHIFT, Tab, changegroupactive, b

# ═══ Workspace Switching ═══
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# ═══ Move to Workspace ═══
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ═══ Media Keys ═══
bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindl = , XF86MonBrightnessDown, exec, brightnessctl set 5%-
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 3%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 3%-

# ═══ Mouse Bindings ═══
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# ═══ System ═══
bind = $mainMod SHIFT, E, exit

# ═══ Quick Launch ═══
bind = $mainMod SHIFT, S, exec, steam
bind = $mainMod SHIFT, T, exec, ~/.config/hypr/scripts/kitty-dropdown.sh || kitty --class kitty-dropdown
bind = $mainMod SHIFT, D, exec, discord || vesktop
bind = $mainMod SHIFT, M, exec, spotify
bind = $mainMod SHIFT, C, exec, code || codium

# ═══ Screenshots ═══
# Print: Full screen to Pictures/Screenshots
bind = , Print, exec, mkdir -p ~/Pictures/Screenshots && grim ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png && notify-send "Screenshot" "Saved to ~/Pictures/Screenshots"

# SUPER+Print: Area selection to file
bind = $mainMod, Print, exec, mkdir -p ~/Pictures/Screenshots && grim -g "$(slurp)" ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png && notify-send "Screenshot" "Area saved to ~/Pictures/Screenshots"

# SHIFT+Print: Area selection to clipboard
bind = SHIFT, Print, exec, grim -g "$(slurp)" - | wl-copy && notify-send "Screenshot" "Copied to clipboard"

# SUPER+SHIFT+Print: Current window to clipboard
bind = $mainMod SHIFT, Print, exec, grim -g "$(hyprctl activewindow -j | jq -r '"\(.at[0]),\(.at[1]) \(.size[0])x\(.size[1])"')" - | wl-copy && notify-send "Screenshot" "Window copied to clipboard"
