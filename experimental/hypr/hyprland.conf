# ═══════════════════════════════════════════════════════════════════════════════
# HYPRLAND CONFIGURATION - REFINED & OPTIMIZED
# ═══════════════════════════════════════════════════════════════════════════════

autogenerated = 0

monitor = eDP-1, 1920x1200@165, 0x0, 1



# ═══════════════════════════════════════════════════════════════════════════════
# ENVIRONMENT VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XCURSOR_THEME,Breeze-cursors
env = GTK_THEME,Adwaita-dark
env = QT_QPA_PLATFORMTHEME,kde
env = MOZ_ENABLE_WAYLAND,1
env = MOZ_WAYLAND_USE_VISIBLE,1
env = QT_QPA_PLATFORM,wayland;xcb
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = GDK_BACKEND,wayland,x11
env = ELECTRON_OZONE_PLATFORM_HINT,auto
env = _JAVA_AWT_WM_NONREPARENTING,1
env = EGL_PLATFORM,wayland
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = XDG_SESSION_DESKTOP,Hyprland
env = ELECTRON_FORCE_DARK_MODE,1



# ═══════════════════════════════════════════════════════════════════════════════
# STARTUP APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment DISPLAY WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = dunst
exec-once = hyprpaper
exec-once = waybar
exec-once = pipewire
exec-once = wireplumber
exec-once = ~/.config/hypr/scripts/portal-startup.sh 2>/dev/null || (sleep 2 && /usr/lib/xdg-desktop-portal-hyprland)
exec-once = brightnessctl set 40%
exec-once = gsettings set org.gnome.desktop.interface gtk-theme 'Adwaita-dark'
exec-once = gsettings set org.gnome.desktop.interface color-scheme 'prefer-dark'



# ═══════════════════════════════════════════════════════════════════════════════
# VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════

$terminal = kitty
$fileManager = dolphin
$menu = wofi --show drun --matching=snappy -i
$mainMod = SUPER

# Base colors (Tokyo Night theme)
$bg = 1a1b26
$bg_alt = 24283b
$fg = c0caf5
$fg_dark = 565f89
$blue = 7aa2f7
$cyan = 7dcfff
$green = 9ece6a
$orange = ff9e64
$red = f7768e
$purple = bb9af7
$yellow = e0af68

# Alpha variants (ee = 93%, dd = 87%)
$blueee = 7aa2f7ee
$purpleee = bb9af7ee
$bg_altdd = 24283bdd
$redee = f7768eee
$greenee = 9ece6aee
$orangeee = ff9e64ee
$cyanee = 7dcfffee



# ═══════════════════════════════════════════════════════════════════════════════
# GENERAL & PERFORMANCE
# ═══════════════════════════════════════════════════════════════════════════════

general {
    gaps_in = 6
    gaps_out = 12
    border_size = 2
    col.active_border = rgba($blueee) rgba($purpleee) 45deg
    col.inactive_border = rgba($bg_altdd)
    layout = dwindle
    allow_tearing = true
    resize_on_border = true
    extend_border_grab_area = 20
    hover_icon_on_border = true
}



# ═══════════════════════════════════════════════════════════════════════════════
# DECORATION
# ═══════════════════════════════════════════════════════════════════════════════

decoration {
    rounding = 10
    shadow {
        enabled = true
        range = 4
        render_power = 2
        color = rgba(1a1b26ee)
        color_inactive = rgba(1a1b2688)
    }
    blur {
        enabled = false
    }
    dim_inactive = false
    dim_strength = 0.0
}



# ═══════════════════════════════════════════════════════════════════════════════
# ANIMATIONS (Disabled for performance - toggle with enabled = yes)
# ═══════════════════════════════════════════════════════════════════════════════

animations {
    enabled = no
    bezier = smoothOut, 0.36, 0.0, 0.66, -0.56
    bezier = smoothIn, 0.25, 1.0, 0.5, 1.0
    bezier = overshot, 0.4, 0.0, 0.2, 1.2
    bezier = easeOutQuint, 0.22, 1.0, 0.36, 1.0
    bezier = ease, 0.25, 0.1, 0.25, 1.0
    animation = windows, 1, 4, easeOutQuint, slide
    animation = windowsOut, 1, 4, ease, slide
    animation = windowsMove, 1, 4, ease, slide
    animation = fadeIn, 1, 4, ease
    animation = fadeOut, 1, 4, ease
    animation = fade, 1, 4, ease
    animation = border, 1, 8, default
    animation = workspaces, 1, 4, overshot, slide
    animation = specialWorkspace, 1, 4, overshot, slidevert
}



# ═══════════════════════════════════════════════════════════════════════════════
# INPUT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

input {
    kb_layout = se
    numlock_by_default = true
    follow_mouse = 1
    mouse_refocus = true
    accel_profile = flat
    sensitivity = 0
    touchpad {
        natural_scroll = false
        tap-to-click = true
        disable_while_typing = true
        scroll_factor = 0.5
        tap-and-drag = true
        drag_lock = false
    }
}

cursor {
    no_hardware_cursors = false
    inactive_timeout = 5
    enable_hyprcursor = true
    hide_on_key_press = true
}



# ═══════════════════════════════════════════════════════════════════════════════
# MISC OPTIONS
# ═══════════════════════════════════════════════════════════════════════════════

misc {
    vfr = true
    vrr = 1
    disable_hyprland_logo = true
    force_default_wallpaper = 0
    background_color = 0x1a1b26
    animate_manual_resizes = false
    animate_mouse_windowdragging = false
    enable_swallow = true
    swallow_regex = ^(kitty|Alacritty|foot|org.wezfurlong.wezterm)$
    focus_on_activate = true
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
    middle_click_paste = false
}



# ═══════════════════════════════════════════════════════════════════════════════
# DEBUG OPTIONS
# ═══════════════════════════════════════════════════════════════════════════════

debug {
    disable_logs = true
    disable_time = true
    enable_stdout_logs = false
}



# ═══════════════════════════════════════════════════════════════════════════════
# LAYOUTS
# ═══════════════════════════════════════════════════════════════════════════════

dwindle {
    pseudotile = true
    preserve_split = true
    smart_split = false
    smart_resizing = true
    force_split = 0
}

master {
    new_status = master
    new_on_top = true
    mfact = 0.55
    special_scale_factor = 0.8
    orientation = left
}



# ═══════════════════════════════════════════════════════════════════════════════
# GROUPS
# ═══════════════════════════════════════════════════════════════════════════════

group {
    insert_after_current = true
    focus_removed_window = true
    groupbar {
        enabled = true
        font_family = JetBrains Mono Nerd Font
        font_size = 11
        col.active = rgba($blueee)
        col.inactive = rgba($bg_altdd)
        col.locked_active = rgba($redee)
        col.locked_inactive = rgba($bg_altdd)
        render_titles = true
        scrolling = true
        gradients = false
        priority = 3
        gaps_in = 3
        gaps_out = 3
    }
}



# ═══════════════════════════════════════════════════════════════════════════════
# BINDS
# ═══════════════════════════════════════════════════════════════════════════════

binds {
    workspace_back_and_forth = true
    allow_workspace_cycles = true
    pass_mouse_when_bound = false
    scroll_event_delay = 300
    movefocus_cycles_fullscreen = true
}



# ═══════════════════════════════════════════════════════════════════════════════
# WINDOW RULES - CONSOLIDATED & OPTIMIZED (No Workspace Assignments)
# ═══════════════════════════════════════════════════════════════════════════════


# ─── GENERAL DIALOGS ──────────────────────────────────────────────────────────

windowrule {
    name = file-dialogs
    match:title = ^(Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload)(.*)$
    float = true
}


# ─── POLKIT & AUTHENTICATION ──────────────────────────────────────────────────

windowrule {
    name = polkit-agents
    match:class = ^(hyprpolkitagent|polkit-kde-authentication-agent-1|org.kde.polkit-kde-authentication-agent-1|polkit-gnome-authentication-agent-1|gcr-prompter|pinentry-.*)$
    float = true
    center = true
    rounding = 12
}


# ─── XWAYLAND ─────────────────────────────────────────────────────────────────

windowrule {
    name = xwaylandvideobridge
    match:class = ^(xwaylandvideobridge)$
    opacity = 0.0 override
}

windowrule {
    name = xwayland-input
    match:xwayland = true
    allows_input = true
}


# ─── BROWSERS ─────────────────────────────────────────────────────────────────

windowrule {
    name = firefox-dialogs
    match:class = ^(firefox)$
    match:title = ^(Library|About Mozilla Firefox|Preferences|Add-ons)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = zen-dialogs
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    match:title = ^(Library|About|Preferences|Add-ons|Settings)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = zen-pip
    match:class = ^(zen-alpha|zen-beta|zen-stable|zen)$
    match:title = ^(Picture-in-Picture)$
    float = true
    pin = true
    size = 30% 30%
    move = 67% 5%
    rounding = 12
}

windowrule {
    name = vivaldi-settings
    match:class = ^(vivaldi-stable)$
    match:title = ^(Vivaldi Settings)$
    float = true
}

windowrule {
    name = chromium-preferences
    match:title = ^(.*Preferences|.*Settings)$
    float = true
}


# ─── PICTURE-IN-PICTURE ──────────────────────────────────────────────────────

windowrule {
    name = pip-generic
    match:title = ^(Picture-in-Picture)$
    float = true
    pin = true
    move = 100%-w-20 100%-w-20
    size = 40% 40%
}


# ─── XDG PORTAL ───────────────────────────────────────────────────────────────

windowrule {
    name = xdg-portal
    match:class = ^(xdg-desktop-portal-gtk)$
    float = true
}


# ─── TERMINALS ────────────────────────────────────────────────────────────────

windowrule {
    name = terminals-opacity
    match:class = ^(kitty|Alacritty|org.wezfurlong.wezterm|foot|contour)$
    opacity = 0.95
}

windowrule {
    name = ghostty-opacity
    match:class = ^(com.mitchellh.ghostty)$
    opacity = 0.9
}

windowrule {
    name = kitty-dropdown
    match:class = ^(kitty-dropdown)$
    float = true
    pin = true
    size = 96% 42%
    move = 2% 0
    opacity = 0.92
    animation = slidevert
    rounding = 0
}

windowrule {
    name = terminal-preferences
    match:title = ^(.*Preferences)$
    float = true
}


# ─── FILE MANAGERS ────────────────────────────────────────────────────────────

windowrule {
    name = file-manager-dialogs
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Progress Dialog|Copying|File Already Exists|Properties|Open|Save|Save As|Select Files|Rename|New Folder|New File|Create New|Add to Archive|Extract|Compress|Settings|Preferences|Configure Dolphin|Find|Search|Confirm|Delete|Trash|Move to Trash|Error|Warning|Information|Choose|Open With|Select Application|Choose an Application)$
    float = true
    rounding = 12
}

windowrule {
    name = dolphin-properties
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Properties)$
    size = 550 650
}

windowrule {
    name = dolphin-file-dialog
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Open|Save|Save As|Select Files)$
    size = 900 600
}

windowrule {
    name = dolphin-rename
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Rename)$
    size = 450 150
}

windowrule {
    name = dolphin-new-item
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(New Folder|New File|Create New)$
    size = 450 180
}

windowrule {
    name = dolphin-archive
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Add to Archive|Extract|Compress)$
    size = 550 450
}

windowrule {
    name = dolphin-settings
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Settings|Preferences|Configure Dolphin)$
    size = 900 700
}

windowrule {
    name = dolphin-search
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Find|Search)$
    size = 600 400
}

windowrule {
    name = dolphin-confirm
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Confirm|Delete|Trash|Move to Trash)$
    size = 450 200
}

windowrule {
    name = dolphin-dialogs
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Error|Warning|Information)$
    size = 500 300
}

windowrule {
    name = dolphin-openwith
    match:class = ^(dolphin|org.kde.dolphin)$
    match:title = ^(Choose|Open With|Select Application|Choose an Application)$
    size = 700 550
}

windowrule {
    name = file-progress
    match:title = ^(File Operation Progress)$
    float = true
}

windowrule {
    name = ark-float
    match:class = ^(org.kde.ark)$
    float = true
}


# ─── OPEN WITH DIALOGS ────────────────────────────────────────────────────────

windowrule {
    name = openwith-dialogs
    match:title = ^(Choose.*Open|Open With|Select.*Application|.*Choose an app.*)$
    float = true
    size = 700 550
    rounding = 12
}

windowrule {
    name = kde-portal-chooseapp
    match:class = ^(org.freedesktop.impl.portal.desktop.kde|kdialog|kded6|kde-open|org.kde.kdialog)$
    float = true
    size = 700 550
    center = true
    rounding = 12
}


# ─── IDES & EDITORS ───────────────────────────────────────────────────────────

windowrule {
    name = ide-opacity
    match:class = ^(Code|codium-url-handler)$
    opacity = 0.95
}

windowrule {
    name = ide-dialogs
    match:class = ^(jetbrains-.*|code|codium)$
    match:title = ^(Settings|Preferences|About|Open Folder|Open File)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = jetbrains-welcome
    match:class = ^(jetbrains-.*)$
    match:title = ^(Welcome to.*)$
    float = true
    center = true
}

windowrule {
    name = dbeaver-preferences
    match:class = ^(DBeaver)$
    match:title = ^(.*Preferences|.*Driver Manager.*)$
    float = true
}

windowrule {
    name = zed-settings
    match:class = ^(dev.zed.Zed)$
    match:title = ^(.*Settings.*)$
    float = true
}

windowrule {
    name = gitkraken
    match:class = ^(gitkraken)$
    float = true
    size = 1200 800
    rounding = 12
}

windowrule {
    name = gitg
    match:class = ^(gitg)$
    float = true
    size = 1100 750
    rounding = 12
}


# ─── COMMUNICATION ────────────────────────────────────────────────────────────

windowrule {
    name = discord-filepicker
    match:class = ^(discord)$
    match:title = ^(File Picker|Discord Updater)$
    float = true
    size = 450 250
    rounding = 12
}

windowrule {
    name = telegram-mediaviewer
    match:class = ^(org.telegram.desktop)$
    match:title = ^(Media viewer)$
    float = true
    center = true
    size = 80% 80%
}

windowrule {
    name = slack-call
    match:class = ^(Slack)$
    match:title = ^(.*Call.*)$
    float = true
}

windowrule {
    name = teams-call
    match:class = ^(Microsoft Teams.*)$
    match:title = ^(.*Call.*)$
    float = true
}

windowrule {
    name = signal-preferences
    match:class = ^(Signal)$
    match:title = ^(.*Preferences.*)$
    float = true
}


# ─── EMAIL ────────────────────────────────────────────────────────────────────

windowrule {
    name = email-reminder
    match:class = ^(betterbird|thunderbird)$
    match:title = ^(.*)(Reminder)(.*)$
    float = true
}

windowrule {
    name = thunderbird-compose
    match:class = ^(thunderbird|Thunderbird)$
    match:title = ^(Write:|Compose)$
    float = true
    size = 70% 80%
    center = true
    rounding = 12
}

windowrule {
    name = evolution-sendreceive
    match:class = ^(evolution)$
    match:title = ^(Send & Receive Mail)$
    float = true
}


# ─── MEDIA PLAYERS ────────────────────────────────────────────────────────────

windowrule {
    name = vlc-effects
    match:class = ^(vlc)$
    match:title = ^(Adjustments and Effects)$
    float = true
}


# ─── VIDEO PLAYERS ────────────────────────────────────────────────────────────

windowrule {
    name = mpv
    match:class = ^(mpv)$
    float = true
    move = center center
    rounding = 0
    size = 80% 80%
}


# ─── STEAM ────────────────────────────────────────────────────────────────────

windowrule {
    name = steam-tile
    match:class = ^(steam)$
    match:title = ^(Steam)$
    tile = true
    center = false
}

windowrule {
    name = steam-float
    match:class = ^(steam)$
    match:title = ^(Friends List|.*Chat.*|Settings|.* - News|Screenshot)$
    float = true
    size = 700 750
    rounding = 12
}

windowrule {
    name = steam-signin
    match:title = ^(Sign in to Steam)$
    float = true
    center = true
}

windowrule {
    name = steam-bigpicture
    match:class = ^(steam)$
    match:title = ^(Steam Big Picture Mode)$
    fullscreen = true
    monitor = eDP-1
}

windowrule {
    name = steam-games
    match:class = ^(steam_app_.*)$
    fullscreen = true
    monitor = eDP-1
    immediate = true
}

windowrule {
    name = steam-no-center
    match:class = ^(steam)$
    center = false
}


# ─── GAMES ────────────────────────────────────────────────────────────────────

windowrule {
    name = fps-games
    match:class = ^(cs2|dota2|gamescope)$
    immediate = true
    fullscreen = true
}

windowrule {
    name = valorant-game
    match:title = ^(Valorant)$
    immediate = true
    fullscreen = true
}


# ─── MINECRAFT ────────────────────────────────────────────────────────────────

windowrule {
    name = minecraft-launcher
    match:class = ^(PrismLauncher|org.prismlauncher.PrismLauncher|hmcl|Minecraft Launcher)$
    float = true
    size = 850 600
    rounding = 12
}

windowrule {
    name = minecraft-game
    match:class = ^(Minecraft.*)$
    fullscreen = true
    immediate = true
}


# ─── GAME LAUNCHERS ───────────────────────────────────────────────────────────

windowrule {
    name = lutris-preferences
    match:class = ^(lutris)$
    match:title = ^(.*Preferences)$
    float = true
}

windowrule {
    name = lutris-tile
    match:class = ^(lutris)$
    tile = true
}

windowrule {
    name = wine-programs
    match:class = ^(wine|\.exe)$
    float = true
}

windowrule {
    name = mangohud
    match:class = ^(mangohud)$
    float = true
    pin = true
}


# ─── CREATIVE TOOLS ───────────────────────────────────────────────────────────

# GIMP specifics
windowrule {
    name = gimp-prop
    match:class = ^(Gimp-2.10)$
    match:title = ^(Prop.*|Change Foreground Color)$
    float = true
}

windowrule {
    name = gimp-float
    match:class = ^(gimp)$
    match:title = ^(Layer|Brush|Tool Options)$
    float = true
    pin = true
}

# Blender specifics
windowrule {
    name = blender-dialogs
    match:class = ^(blender)$
    match:title = ^(Blender Preferences|Blender File View)$
    float = true
}

# Inkscape specifics
windowrule {
    name = inkscape-preferences
    match:class = ^(org.inkscape.Inkscape)$
    match:title = ^(.*Preferences)$
    float = true
}

# Darktable specifics
windowrule {
    name = darktable-preferences
    match:class = ^(darktable)$
    match:title = ^(.*)(Preferences)(.*)$
    float = true
}

# Audacity specifics
windowrule {
    name = audacity-dialogs
    match:class = ^(audacity)$
    match:title = ^(.*)(Effect|Analyzer|Help)(.*)$
    float = true
}

# Kdenlive specifics
windowrule {
    name = kdenlive-dialogs
    match:class = ^(org.kde.kdenlive)$
    match:title = ^(.*)(Render|Wizard)(.*)$
    float = true
}


# ─── OBS STUDIO ───────────────────────────────────────────────────────────────

windowrule {
    name = obs-dialogs
    match:class = ^(com.obsproject.Studio)$
    match:title = ^(.*Preferences|.*Properties.*)$
    float = true
}


# ─── VIRTUALIZATION ───────────────────────────────────────────────────────────

windowrule {
    name = virt-manager-dialogs
    match:class = ^(virt-manager)$
    match:title = ^(New VM|Virtual Machine Manager|.* on QEMU/KVM)$
    float = true
}

windowrule {
    name = remmina-mainwindow
    match:class = ^(remmina)$
    match:title = ^(Remmina Main Window)$
    float = true
}

windowrule {
    name = remmina-client
    match:class = ^(remmina)$
    match:title = ^(.*Remmina Remote Desktop Client)$
    tile = true
}

windowrule {
    name = anydesk
    match:class = ^(anydesk)$
    float = true
}

windowrule {
    name = looking-glass
    match:class = ^(looking-glass-client)$
    fullscreen = true
}


# ─── SYSTEM UTILITIES ─────────────────────────────────────────────────────────

windowrule {
    name = system-monitors
    match:class = ^(floating-btop|org.gnome.SystemMonitor|io.missioncenter.MissionCenter|htop|btop)$
    float = true
    size = 1000 650
    rounding = 12
}

windowrule {
    name = disk-tools
    match:class = ^(gparted|gpartedbin|org.gnome.DiskUtility|timeshift-gtk)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = pavucontrol
    match:class = ^(pavucontrol|org.pulseaudio.pavucontrol|pavucontrol-qt)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = bluetooth-network
    match:class = ^(blueman-manager|.*blueman-manager-wrapped|nm-connection-editor|network-manager-applet)$
    float = true
    size = 800 550
    rounding = 12
}

windowrule {
    name = calculators
    match:class = ^(org.gnome.Calculator|kcalc)$
    float = true
    size = 420 520
    rounding = 12
}

windowrule {
    name = settings
    match:class = ^(gnome-control-center|systemsettings|font-manager)$
    float = true
    size = 1000 700
    rounding = 12
}

windowrule {
    name = kde-system-settings
    match:class = ^(systemsettings)$
    size = 1100 750
}

windowrule {
    name = color-picker
    match:class = ^(org.gnome.ColorChooser|gpick|kcolorchooser)$
    float = true
    rounding = 12
}

windowrule {
    name = gnome-utils
    match:class = ^(gnome-calendar|org.gnome.Calendar|org.gnome.clocks|org.gnome.Weather|org.gnome.Maps|simple-scan|org.gnome.baobab|baobab)$
    float = true
    size = 700 550
    rounding = 12
}

windowrule {
    name = gnome-maps
    match:class = ^(org.gnome.Maps)$
    size = 1000 700
}

windowrule {
    name = gnome-clocks
    match:class = ^(org.gnome.clocks)$
    size = 600 500
}

windowrule {
    name = printer
    match:class = ^(system-config-printer)$
    float = true
    size = 800 600
    rounding = 12
}

windowrule {
    name = qdirstat
    match:class = ^(qdirstat)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = xdg-desktop-portal
    match:class = ^(xdg-desktop-portal-gtk)$
    float = true
    rounding = 12
}


# ─── CACHYOS SPECIFIC ─────────────────────────────────────────────────────────

windowrule {
    name = cachyos-tools
    match:class = ^(CachyOSHello|cachyos-hello|org.cachyos.cachyos-pi|btrfs-assistant)$
    float = true
    size = 900 600
    rounding = 12
}

windowrule {
    name = cachyos-hello-alt
    match:class = ^(cachyos-hello)$
    center = true
}

windowrule {
    name = cachyos-pi
    match:class = ^(org.cachyos.cachyos-pi)$
    size = 1100 750
}


# ─── PACKAGE MANAGERS ─────────────────────────────────────────────────────────

windowrule {
    name = package-managers
    match:class = ^(octopi|pamac-manager|org.manjaro.pamac.manager|update-manager)$
    float = true
    size = 1100 750
    rounding = 12
}

windowrule {
    name = update-manager
    match:class = ^(update-manager)$
    size = 700 500
}


# ─── PASSWORD MANAGERS ────────────────────────────────────────────────────────

windowrule {
    name = password-managers
    match:class = ^(org.keepassxc.KeePassXC|Bitwarden|1Password)$
    float = true
    center = true
}

windowrule {
    name = keepassxc
    match:class = ^(org.keepassxc.KeePassXC)$
    size = 900 500
}

windowrule {
    name = keepassxc-unlock
    match:class = ^(org.keepassxc.KeePassXC)$
    match:title = ^(Unlock Database)$
    float = true
}

windowrule {
    name = bitwarden
    match:class = ^(Bitwarden)$
    size = 800 600
}


# ─── IMAGE VIEWERS ────────────────────────────────────────────────────────────

windowrule {
    name = image-viewers
    match:class = ^(org.gnome.Loupe|eog|org.gnome.eog|nomacs|feh|sxiv|imv|nsxiv|org.kde.gwenview)$
    float = true
    size = 1000 750
    rounding = 12
}

windowrule {
    name = loupe
    match:class = ^(org.gnome.Loupe)$
    size = 80% 80%
}


# ─── PDF & DOCUMENT VIEWERS ───────────────────────────────────────────────────

windowrule {
    name = document-viewers
    match:class = ^(org.gnome.Evince|evince|atril|okular|zathura|org.pwmt.zathura|org.kde.okular)$
    float = true
    size = 1100 800
    rounding = 12
}

windowrule {
    name = document-print
    match:class = ^(org.gnome.Evince|evince|okular|zathura|org.pwmt.zathura)$
    match:title = ^(Print)$
    float = true
}


# ─── ARCHIVE MANAGERS ─────────────────────────────────────────────────────────

windowrule {
    name = archive-managers
    match:class = ^(org.gnome.FileRoller|file-roller|engrampa|ark)$
    float = true
    size = 800 550
    rounding = 12
}


# ─── OFFICE SUITES ────────────────────────────────────────────────────────────

windowrule {
    name = office-dialogs
    match:class = ^(libreoffice.*|wps)$
    match:title = ^(.*)(Splash|Recovery|Properties|Options|all_wps)(.*)$
    float = true
}

windowrule {
    name = libreoffice-options
    match:class = ^(libreoffice.*)$
    match:title = ^(.*)(Options)(.*)$
    center = true
}

windowrule {
    name = onlyoffice-dialogs
    match:class = ^(onlyoffice-desktopeditors)$
    match:title = ^(Open Local File|Save)$
    float = true
}

windowrule {
    name = onlyoffice-tile
    match:class = ^(onlyoffice-desktopeditors)$
    tile = true
}


# ─── KDE CONNECT ──────────────────────────────────────────────────────────────

windowrule {
    name = kde-connect
    match:class = ^(kdeconnect.*|kdeconnect.app|org.kde.kdeconnect.app)$
    float = true
}

windowrule {
    name = kde-connect-app
    match:class = ^(kdeconnect.app|org.kde.kdeconnect.app)$
    size = 800 600
    rounding = 12
}

windowrule {
    name = kde-connect-title
    match:title = ^(KDE Connect)$
    float = true
}


# ─── SCREENSHOT TOOLS ─────────────────────────────────────────────────────────

windowrule {
    name = screenshot-tools
    match:class = ^(swappy|flameshot)$
    float = true
}

windowrule {
    name = swappy
    match:class = ^(swappy)$
    center = true
}

windowrule {
    name = flameshot
    match:class = ^(flameshot)$
    move = 0 0
}


# ─── QT CONFIG TOOLS ──────────────────────────────────────────────────────────

windowrule {
    name = qt-config
    match:class = ^(kvantummanager|qt5ct|qt6ct|nwg-look)$
    float = true
}


# ─── MISC DIALOGS ─────────────────────────────────────────────────────────────

windowrule {
    name = misc-dialogs
    match:class = ^(zenity|yad|kdialog|org.kde.kdialog)$
    float = true
    rounding = 12
}


# ═══════════════════════════════════════════════════════════════════════════════
# LAYER RULES
# ═══════════════════════════════════════════════════════════════════════════════

layerrule {
    name = rofi-blur
    match:namespace = rofi
    blur = true
}

layerrule {
    name = waybar-blur
    match:namespace = waybar
    blur = true
}

layerrule {
    name = notifications-blur
    match:namespace = notifications
    blur = true
}


# ═══════════════════════════════════════════════════════════════════════════════
# KEYBINDINGS
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, Return, exec, $terminal
bind = $mainMod, D, exec, pidof wofi >/dev/null && pkill -x wofi || wofi --show drun --matching=snappy -i
bind = $mainMod, Q, killactive
bind = $mainMod, V, fullscreen
bind = $mainMod SHIFT, Space, togglefloating
bind = $mainMod, G, togglegroup
bind = $mainMod, B, exec, zen-browser || zen || zen-alpha
bind = $mainMod, E, exec, $fileManager

bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, right, movewindow, r
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, down, movewindow, d

bind = ALT, Tab, changegroupactive, f
bind = ALT SHIFT, Tab, changegroupactive, b

bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

bindl = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindl = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindl = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindl = , XF86MonBrightnessDown, exec, brightnessctl set 5%-
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPrev, exec, playerctl previous
bindle = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1.5 @DEFAULT_AUDIO_SINK@ 3%+
bindle = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 3%-

bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

bind = $mainMod SHIFT, E, exit
bind = $mainMod SHIFT, S, exec, steam
bind = $mainMod SHIFT, T, exec, ~/.config/hypr/scripts/kitty-dropdown.sh || kitty --class kitty-dropdown
bind = $mainMod SHIFT, D, exec, discord || vesktop
bind = $mainMod SHIFT, M, exec, spotify
bind = $mainMod SHIFT, C, exec, code || codium

bind = , Print, exec, mkdir -p ~/Pictures/Screenshots && grim ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png && notify-send "Screenshot" "Saved to ~/Pictures/Screenshots"
bind = $mainMod, Print, exec, mkdir -p ~/Pictures/Screenshots && grim -g "$(slurp)" ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png && notify-send "Screenshot" "Area saved to ~/Pictures/Screenshots"
bind = SHIFT, Print, exec, grim -g "$(slurp)" - | wl-copy && notify-send "Screenshot" "Copied to clipboard"
bind = $mainMod SHIFT, Print, exec, grim -g "$(hyprctl activewindow -j | jq -r '"\(.at[0]),\(.at[1]) \(.size[0])x\(.size[1])"')" - | wl-copy && notify-send "Screenshot" "Window copied to clipboard"
